Base64 encoded: I2luY2x1ZGUgInRleHRfYW5hbHl6ZXIuaCIKCgp0ZXh0X2FuYWx5emVyOjp0ZXh0X2FuYWx5emVyKHN0ZDo6d3N0cmluZyogdGV4dCkKICAgIDogX3RleHQodGV4dCksCiAgICAgIF9mcmVxdWVuY3kgKG51bGxwdHIpLAogICAgICBfbGVuZ3RoKHRleHQtPmxlbmd0aCgpKSwKICAgICAgX2VudHJvcHkoMCkKewogICAgdGhpcy0+Y29tcHV0ZV9mcmVxdWVuY3koKTsKICAgIHRoaXMtPmNvbXB1dGVfZW50cm9weSgpOwogICAgdGhpcy0+Y29tcHV0ZV9pbmZvcm1hdGlvbl9jb3VudCgpOwp9CgoKCnRleHRfYW5hbHl6ZXI6On50ZXh0X2FuYWx5emVyKCkKewogICAgZGVsZXRlIF9mcmVxdWVuY3k7CiAgICBkZWxldGUgX3RleHQ7Cn0KCgoKdm9pZCB0ZXh0X2FuYWx5emVyOjpjb21wdXRlX2ZyZXF1ZW5jeSgpCnsKICAgIHRoaXMtPl9mcmVxdWVuY3kgPSBuZXcgc3RkOjptYXA8d2NoYXJfdCwgbG9uZyBkb3VibGU+KCk7CiAgICBmb3IoY29uc3QgYXV0byYgeCA6ICp0aGlzLT5fdGV4dCkKICAgIHsKICAgICAgICBhdXRvIGl0ZXJhdG9yID0gdGhpcy0+X2ZyZXF1ZW5jeS0+ZmluZCh4KTsKICAgICAgICBpZihpdGVyYXRvciA9PSB0aGlzLT5fZnJlcXVlbmN5LT5lbmQoKSkKICAgICAgICB7CiAgICAgICAgICAgIHRoaXMtPl9mcmVxdWVuY3ktPmluc2VydCh7eCwgMX0pOwogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICArK2l0ZXJhdG9yLT5zZWNvbmQ7CiAgICAgICAgfQogICAgfQogICAgZm9yKGF1dG8mIHBhaXIgOiAqX2ZyZXF1ZW5jeSkKICAgIHsKICAgICAgICBwYWlyLnNlY29uZCAvPSBzdGF0aWNfY2FzdDxsb25nIGRvdWJsZT4oX2xlbmd0aCk7CiAgICB9Cn0KCgoKdm9pZCB0ZXh0X2FuYWx5emVyOjpjb21wdXRlX2VudHJvcHkoKQp7CiAgICBmb3IoY29uc3QgYXV0byYgcGFpciA6ICpfZnJlcXVlbmN5KQogICAgewogICAgICAgIF9lbnRyb3B5ICs9IHBhaXIuc2Vjb25kICogc3RkOjpsb2cyKDEgLyBwYWlyLnNlY29uZCk7CiAgICB9Cn0KCnZvaWQgdGV4dF9hbmFseXplcjo6Y29tcHV0ZV9pbmZvcm1hdGlvbl9jb3VudCgpCnsKICAgIF9pbmZvcm1hdGlvbiA9IF9lbnRyb3B5ICogX2xlbmd0aDsKfQoKCgp2b2lkIHRleHRfYW5hbHl6ZXI6OnByaW50X2ZyZXF1ZW5jeShzdGQ6OmJhc2ljX29zdHJlYW08d2NoYXJfdD4gJm9zLCB1aW50MzJfdCBjb2x1bW5zKSBjb25zdAp7CiAgICBvcyA8PCAiUHJvYmFiaWxpdHk6IFxuIjsKICAgIGludCBmbGFnID0gMDsKICAgIGZvciAoY29uc3QgYXV0byAmcGFpciA6ICpfZnJlcXVlbmN5KQogICAgewogICAgICAgIG9zIDw8IHBhaXIuZmlyc3QgPDwgIjogIiA8PCBwYWlyLnNlY29uZCA8PCAoKCgrK2ZsYWcgJSBjb2x1bW5zKSAhPSAwKT8gJ1x0JyA6ICdcbicpOwogICAgfQogICAgb3MgPDwgc3RkOjplbmRsOyAgCn0KCgoKdm9pZCB0ZXh0X2FuYWx5emVyOjpwcmludF9lbnRyb3B5KHN0ZDo6YmFzaWNfb3N0cmVhbTx3Y2hhcl90PiAmb3MpIGNvbnN0CnsKICAgIG9zIDw8ICJFbnRyb3B5OiAiIDw8IF9lbnRyb3B5IDw8ICdcbic7Cn0KCgoKdm9pZCB0ZXh0X2FuYWx5emVyOjpwcmludF9pbmZvcm1hdGlvbihzdGQ6OmJhc2ljX29zdHJlYW08d2NoYXJfdD4gJm9zKSBjb25zdAp7CiAgICBvcyA8PCAiSW5mb3JtYXRpb24gKGJpdHMpOiAiIDw8IF9pbmZvcm1hdGlvbiA8PCAnXG4nCiAgICAgICA8PCAiUmVhbCBiaXQgY291bnRlcjogIiA8PCBfbGVuZ3RoICogQ0hBUl9CSVQgPDwgJ1xuJzsKfQoKCgp2b2lkIHRleHRfYW5hbHl6ZXI6OnByaW50X2FsbChzdGQ6OmJhc2ljX29zdHJlYW08d2NoYXJfdD4gJm9zLCB1aW50MzJfdCBjb2x1bW5zKSBjb25zdAp7CiAgICB0aGlzLT5wcmludF9lbnRyb3B5KG9zKTsKICAgIHRoaXMtPnByaW50X2luZm9ybWF0aW9uKG9zKTsKICAgIHRoaXMtPnByaW50X2ZyZXF1ZW5jeShvcywgY29sdW1ucyk7Cn0=
